<button *ngIf="!showChat && !showChatBot2" class="btn btn-primary btn-show" (click)="openChat()">Chat bot</button>


<div class="test" [ngClass]="{'show' : showChat, 'fullScreen' : isFullScreen , 'closeChatBot' : !showChat}">  
  <div class="title-chat-bot">
    <p>BroRakyat</p>
    <div class="bank-logo"></div>
    
    <button  class="x-button" (click)="closeChat()">X</button>
    <button  class="full-screen-btn" (click)="viewfullScren()">fullscreen</button>
  </div>
  
  <!-- <p *ngIf="!response && !loading">Hi! Im Ai bot</p> -->
  <div class="generate-text" [ngClass]="{'fullScreen' : isFullScreen}" #chatContainer>

    <div *ngIf="chatHistory.length === 0" class="bot-chat">
      <span>ask something!</span>
    </div>

    <button class="btn btn-primary btn-curious"  *ngIf="isClose" (click)="showSuggestChat()">?</button>
    <button class="btn btn-primary btn-down"  (click)="scrollToBottom()"><i class="fa fa-arrow-down"></i></button>
    
    
    
    <div *ngFor="let chat of chatHistory; let i = index"  >
      <div class="chat-content"  #chatContainer >
        <div class="user-chat"  #chatContainer>
          <p>{{ chat.prompt }}</p>
          <div *ngIf="timeHistory[i]?.timeResponse">
            <small class="send-chat" *ngIf="!chat.sending && timeHistory[i].timeResponse">{{ getTimeAgo(timeHistory[i].timeResponse) }}</small> <!-- Show time if not sending -->
            <small class="send-chat-loading"  #chatContainer *ngIf="chat.sending">sending</small> <!-- Check if it's sending -->
          </div>
        </div>
          
        <div class="chat-content">
          <div class="bot-chat"  [ngClass]="{'loading-state': loading && i === chatHistory.length - 1}"  >
            <div *ngIf="loading && i === chatHistory.length - 1"></div>
            <span class="bot-response" *ngIf="!loading || i !== chatHistory.length - 1" [innerHTML]="formatTextWithParagraphs(chat.response)" ></span>
            <div *ngIf="timeHistory[i]?.timeResponse">
              <small class="respone-chat" *ngIf="!chat.sending && timeHistory[i].timeResponse">{{ getTimeAgo(timeHistory[i].timeResponse) }}</small> <!-- Show time if not sending -->
            </div>
          </div>
        </div>
            
        
        <div *ngIf="i === chatHistory.length - 1 && chatHistory.length > 1 && !chat.sending && !prompt && simpleQuestion && showSuggestedQuestion"   class="suggested-question" >
          <div class="btn-suggest">
            <div class="container-suggest-que">
              <small class="text-suggest">Try this suggested question:</small>
              <button class="x-suggest"  (click)="closeSuggest()">X</button>
            </div>
            <button 
            class="btn-change-question" 
            (click)="changeQuestion()" 
            [disabled]="isChange"   
            [ngClass]="{'btn-disable-change': isChange}">
            Change Question
          </button> 
          <div *ngIf="isChange" class="show-loading" [ngClass]="{'hidden' : !showSuggestedQuestion}"></div>
          <button 
          class="simpleQue" 
          [disabled]="isChange"   
          [ngClass]="{'btn-disable-question': isChange}" 
          (click)="promptSend(simpleQuestion)">
          <small class="change-color-que">{{ simpleQuestion }}</small>
        </button>
      </div>
      </div>
  


          </div>
        </div>
      </div>

      <div class="center-box-submit"  [ngClass]="{'fullScreen' : isFullScreen}">

        <div class="chat-bot-submit">
          <small class="show-text">AI-generated content may be incorrect</small>
          
          <textarea type="text" placeholder="Message here..." name="" id="message-input" class="user-input-text"     (input)="onPromptInput()" [(ngModel)]="prompt"></textarea>
          
          <button  class="btn-send" 
          [disabled]="!prompt || loading" id="send-button" 
          (click)="sendData()"  
          [ngClass]="{'btn-disabled': !prompt}" > <i class="fa fa-paper-plane"></i></button> 
        </div>
      
    </div>  
</div>    





  <!-- <button *ngIf="!showChat && !showChatBot2" class="btn btn-primary btn-show-2" (click)="openChatbot2()">Chat bot 2</button>

  <div class="test-2" [ngClass]="{'show2' : showChatBot2}">  
    
      <button  class="x-button-2" (click)="closeChatBot2()">X</button>
    <iframe
    src="https://www.chatbase.co/chatbot-iframe/b739rVb_S9DimXhrJHBNt"
    width="100%"
    style="height: 100%; min-height: 700px"
    frameborder="0"
  ></iframe>
  </div>     -->