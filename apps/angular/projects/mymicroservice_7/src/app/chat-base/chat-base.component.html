  <div *ngIf="editingFileId" class="card-overlay">
      <div class="card">
          <form #myForm="ngForm" (ngSubmit)="updateFileContent(myForm, $event)">
              <h2>Editing: {{ editingFileName }}</h2>
            
              <!-- Display a message if the content is empty and has been touched -->
              <div *ngIf="myForm.controls['content']?.touched && myForm.controls['content']?.invalid" class="error-message">
                Please fill out the content.
              </div>
              <textarea [(ngModel)]="editingFileContent" name="content" class="editor-textarea" required></textarea>
            
              <!-- Display a message if the reasonForChanges is empty and has been touched -->
              <div *ngIf="myForm.controls['reasonForChanges']?.touched && myForm.controls['reasonForChanges']?.invalid " class="error-message">
                Please provide a reason for changes.
              </div>
              <textarea [(ngModel)]="reasonForChanges" name="reasonForChanges" placeholder="Reason for changes" required class="required-form"></textarea>
            
              <!-- Display a message if the changesMade is empty and has been touched -->
              <div *ngIf="myForm.controls['changesMade']?.touched && myForm.controls['changesMade']?.invalid " class="error-message">
                Please describe the changes made.
              </div>
              <textarea [(ngModel)]="changesMade" name="changesMade" placeholder="Changes made" required class="required-form"></textarea>
            
              <div class="editor-actions">
                <!-- Disable button if the form is invalid or formSubmit is true -->
                <button type="submit" class="save-btn">
                  Save
                </button>
                <button type="button" class="cancel-btn" (click)="cancelEditing()">Cancel</button>
              </div>
            </form>
            
            
            
      </div>
    </div>


<!-- View Info Card -->
<div *ngIf="isOpen" class="card-overlay-2">
    <div class="card-2">
      <h2>View File Information</h2>
      <form #infoForm="ngForm">
        <!-- File Name -->
        <label for="fileName">File Name:</label>
        <input type="text" id="fileName" [(ngModel)]="infoFileName" name="fileName" [disabled]="true"  />
      
        <!-- Edited By -->
        <label for="editBy">Edited By:</label>
        <input
          type="text"
          id="editBy"
          [value]="infoEditBy ? infoEditBy : 'Not modified'"
          [disabled]="true"
        />
      
        <!-- Reason Change -->
        <label for="reasonForChanges">Reason Change:</label>
        <input
          type="text"
          id="reasonForChanges"
          [value]="viewReasonForChanges ? viewReasonForChanges : 'Not modified'"
          [disabled]="true"
        />
      
        <!-- Changes Made -->
        <label for="changeMade">Changes Made:</label>
        <input
          type="text"
          id="changeMade"
          [value]="viewChangesMade ? viewChangesMade : 'Not modified'"
          [disabled]="true"
        />
      
        <!-- Uploaded At -->
        <label for="uploadedAt">Uploaded At:</label>
        <input
          type="text"
          id="uploadedAt"
          [value]="infoUploadDate | date: 'dd/MM/yyyy, HH:mm'"
          [disabled]="true"
        />
      
        <!-- Last Edited -->
        <label for="editedDate">Last Edited:</label>
        <input
          type="text"
          id="editedDate"
          [value]="infoNewUploadDate ? (infoNewUploadDate | date: 'dd/MM/yyyy, HH:mm') : 'Not modified'"
          [disabled]="true"
        />
      
        <button type="button" (click)="close()">Close</button>
      </form>
      
</div>
</div>



  

<div class="chatbase">
    <!-- Dark Overlay and Centered Card -->
    
    <!-- File List Table -->
    <div class="table-container">
         <form (ngSubmit)="onSubmit()">
             <div class="file-upload">
                 <input type="file" class="choose-file" (change)="onFileSelected($event)" accept=".txt" />
                 <button type="submit">Upload</button>
             </div>
         </form>

         <table *ngIf="files.length > 0 && !editingFileId">
            <thead>
                <tr>
                  <th>Actions</th>
                    <!-- <th>No</th> -->
                    <th>File Name</th>
                    <th>Uploaded At</th>
                    <th>Last Edit</th>
                    <th>Edit By</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let file of files; let i = index">
                      <td>
                        <!-- Action Button -->
                        <div class="action-list-hover">
                            <!-- Action Button -->
                            <button (click)="toggleActions(file.id)" class="action-button" [attr.aria-expanded]="areActionsVisible(file.id)">
                                Actions
                            </button>
                        
                            <!-- List of Actions (Shown/Hidden for each file) -->
                            <ul *ngIf="areActionsVisible(file.id)" class="action-list">
                                <li><button class="btn-download" (click)="downloadFile(file.id)">Download</button></li>
                                <li><button class="btn-delete" (click)="deleteFile(file.id)">Delete</button></li>
                                <li><button class="btn-edit" (click)="loadFileForEditing(file.id)">Edit</button></li>
                                <li><button  (click)="viewInfo(file.id)">Info</button></li>
                            </ul>
                        </div>
                        
                    </td>
                    <!-- <td>{{ i + 1 }}</td> -->
                    <td>{{ file.fileName }}</td>
                    <td>{{ file.uploadedAt | date: 'dd/MM/yyyy, HH:mm a' }}</td>
                    
                    <!-- Conditionally show editedDate only if it's not null -->
                    <td *ngIf="file.editedDate !== null; else noEditedDate">
                        {{ file.editedDate | date: 'dd/MM/yyyy, HH:mm a' }}
                    </td>
                    <ng-template #noEditedDate>
                        <td>-</td>
                    </ng-template>
                    <td class="info-column" *ngIf="file.editBy !== ''; else noEditor">
                        <span>{{ file.editBy }}</span>
                    </td>
                    <ng-template #noEditor>
                        <td>-</td>
                    </ng-template>
        
                    
                </tr>
            </tbody>
        </table>

</div>
</div>


