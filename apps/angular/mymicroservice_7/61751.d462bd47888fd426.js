"use strict";(self.webpackChunkmymicroservice_7=self.webpackChunkmymicroservice_7||[]).push([[61751],{61751:(K,A,l)=>{l.r(A),l.d(A,{AbstractTemplateContentComponent:()=>E,DEFAULT_TEXT_TEMPLATES_ENTITY_ACTIONS:()=>D,DEFAULT_TEXT_TEMPLATES_ENTITY_PROPS:()=>O,DEFAULT_TEXT_TEMPLATES_TOOLBAR_ACTIONS:()=>j,DEFAULT_TEXT_TEMPLATE_MANAGEMENT_ENTITY_ACTIONS:()=>N,DEFAULT_TEXT_TEMPLATE_MANAGEMENT_ENTITY_PROPS:()=>x,DEFAULT_TEXT_TEMPLATE_MANAGEMENT_TOOLBAR_ACTIONS:()=>y,InlineTemplateContentComponent:()=>L,TEXT_TEMPLATE_MANAGEMENT_ENTITY_ACTION_CONTRIBUTORS:()=>f,TEXT_TEMPLATE_MANAGEMENT_ENTITY_PROP_CONTRIBUTORS:()=>M,TEXT_TEMPLATE_MANAGEMENT_TOOLBAR_ACTION_CONTRIBUTORS:()=>C,TemplateContentsComponent:()=>S,TextTemplateManagementExtensionsGuard:()=>V,TextTemplateManagementGuard:()=>W,TextTemplateManagementModule:()=>Q,TextTemplatesComponent:()=>v,textTemplateManagementExtensionsResolver:()=>P,textTemplateManagementGuard:()=>G});var I=l(39862),e=l(93953),s=l(89417),c=l(58780),i=l(30791);let k=(()=>{class t{constructor(n){this.restService=n,this.apiName="TextTemplateManagement",this.get=a=>this.restService.request({method:"GET",url:"/api/text-template-management/template-contents",params:{templateName:a.templateName,cultureName:a.cultureName}},{apiName:this.apiName}),this.restoreToDefault=a=>this.restService.request({method:"PUT",url:"/api/text-template-management/template-contents/restore-to-default",body:a},{apiName:this.apiName}),this.update=a=>this.restService.request({method:"PUT",url:"/api/text-template-management/template-contents",body:a},{apiName:this.apiName})}static{this.\u0275fac=function(a){return new(a||t)(e.KVO(i.G9T))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})(),$=(()=>{class t{constructor(n){this.restService=n,this.apiName="TextTemplateManagement",this.get=a=>this.restService.request({method:"GET",url:`/api/text-template-management/template-definitions/${a}`},{apiName:this.apiName}),this.getList=a=>this.restService.request({method:"GET",url:"/api/text-template-management/template-definitions",params:{filterText:a.filterText,sorting:a.sorting,skipCount:a.skipCount,maxResultCount:a.maxResultCount}},{apiName:this.apiName})}static{this.\u0275fac=function(a){return new(a||t)(e.KVO(i.G9T))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();var h=l(88141),_=l(70980),z=l(25558),d=l(96354),U=l(73703),u=l(24721),g=l(21998),r=l(15923),b=l(30946),Y=l(7673),F=l(24520),X=l(15306);function B(t,p){if(1&t&&(e.j41(0,"option",10),e.EFF(1),e.k0s()),2&t){const n=p.$implicit;e.Y8G("ngValue",n.cultureName),e.R7$(),e.SpI(" ",n.displayName," ")}}function J(t,p){if(1&t&&(e.j41(0,"option",10),e.EFF(1),e.k0s()),2&t){const n=p.$implicit;e.Y8G("ngValue",n.cultureName),e.R7$(),e.SpI(" ",n.displayName," ")}}let E=(()=>{class t{constructor(){this.fb=(0,e.WQX)(s.ze),this.templateContentService=(0,e.WQX)(k),this.route=(0,e.WQX)(c.nX),this.toasterService=(0,e.WQX)(I.W9),this.templateContent={}}ngOnInit(){this.form=this.fb.group({content:["",[s.k0.required]]}),this.getData().subscribe()}getData(){return this.templateContentService.get({templateName:this.route.snapshot.params.name,cultureName:this.selectedCultureName}).pipe((0,h.M)(a=>{this.templateContent=a,this.form.get("content").setValue(this.templateContent.content)}))}save(n){if(this.form.invalid)return;this.busy=!0;const{content:a}=this.form.value;this.templateContentService.update({templateName:this.templateContent.name,cultureName:this.selectedCultureName,content:a}).pipe((0,_.j)(()=>this.busy=!1)).subscribe(()=>{this.toasterService.success("AbpUi::SavedSuccessfully"),n&&n()})}restoreToDefault(){this.busy=!0,this.templateContentService.restoreToDefault({templateName:this.templateContent.name,cultureName:this.selectedCultureName}).pipe((0,z.n)(()=>this.getData()),(0,_.j)(()=>this.busy=!1)).subscribe(()=>{this.toasterService.success("AbpUi::SavedSuccessfully")})}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["ng-component"]],decls:0,vars:0,template:function(a,o){},encapsulation:2})}}return t})(),L=(()=>{class t extends E{constructor(){super(...arguments),this.router=(0,e.WQX)(c.Ix)}customizePerCulture(){this.router.navigateByUrl(`/text-template-management/text-templates/contents/${this.templateContent.name}`)}save(){super.save(()=>{this.router.navigateByUrl("/text-template-management/text-templates")})}static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})()}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-inline-template-content"]],features:[e.Vt3],decls:43,vars:30,consts:[[3,"title"],["role","alert",1,"alert","alert-danger",3,"innerHTML"],[1,"card"],[1,"card-header"],[1,"form-label"],[1,"card-body"],["id","template-inline-content-form",3,"formGroup"],[1,"row"],[1,"col"],[1,"mb-3"],["for","TemplateContent",1,"form-label"],["id","TemplateContent","name","TemplateContent","rows","10","formControlName","content",1,"form-control",3,"disabled"],[1,"d-flex","flex-column","gap-2","flex-column","flex-md-row","justify-content-between"],["routerLink","/text-template-management/text-templates","role","button",1,"btn","btn-primary"],["aria-hidden","true",1,"fa","fa-arrow-left","me-1"],[1,"d-flex","gap-2","flex-column","flex-md-row"],["id","edit-unique-localization","type","button",1,"btn","btn-link",3,"click","disabled"],["id","restore-to-default","type","button",1,"btn","btn-outline-primary",3,"click","disabled"],["id","save-content","type","button",1,"btn","btn-primary",3,"click","disabled"]],template:function(a,o){1&a&&(e.j41(0,"abp-page",0),e.nI1(1,"abpLocalization"),e.nrm(2,"div",1),e.nI1(3,"abpLocalization"),e.j41(4,"div",2)(5,"div",3)(6,"label",4),e.EFF(7),e.nI1(8,"abpLocalization"),e.j41(9,"strong"),e.EFF(10),e.k0s()()(),e.j41(11,"div",5)(12,"form",6)(13,"div",7)(14,"div",8)(15,"div",9)(16,"label",10),e.EFF(17),e.nI1(18,"abpLocalization"),e.k0s(),e.j41(19,"span"),e.EFF(20," * "),e.k0s(),e.j41(21,"textarea",11),e.EFF(22,"              "),e.k0s()()()(),e.j41(23,"div",7)(24,"div",12)(25,"a",13),e.nrm(26,"i",14),e.j41(27,"span"),e.EFF(28),e.nI1(29,"abpLocalization"),e.k0s()(),e.j41(30,"div",15)(31,"button",16),e.bIt("click",function(){return o.customizePerCulture()}),e.j41(32,"span"),e.EFF(33),e.nI1(34,"abpLocalization"),e.k0s()(),e.j41(35,"button",17),e.bIt("click",function(){return o.restoreToDefault()}),e.j41(36,"span"),e.EFF(37),e.nI1(38,"abpLocalization"),e.k0s()(),e.j41(39,"button",18),e.bIt("click",function(){return o.save()}),e.j41(40,"span"),e.EFF(41),e.nI1(42,"abpLocalization"),e.k0s()()()()()()()()()),2&a&&(e.Y8G("title",e.bMT(1,14,"TextTemplateManagement::Contents")),e.R7$(2),e.Y8G("innerHTML",e.bMT(3,16,"TextTemplateManagement::InlineContentDescription"),e.npT),e.R7$(5),e.SpI("",e.bMT(8,18,"TextTemplateManagement::Name"),": "),e.R7$(3),e.JRh(o.templateContent.name),e.R7$(2),e.Y8G("formGroup",o.form),e.R7$(5),e.JRh(e.bMT(18,20,"TextTemplateManagement::TemplateContent")),e.R7$(4),e.Y8G("disabled",o.busy),e.R7$(7),e.JRh(e.bMT(29,22,"TextTemplateManagement::ReturnToTemplates")),e.R7$(3),e.Y8G("disabled",o.busy),e.R7$(2),e.JRh(e.bMT(34,24,"TextTemplateManagement::CustomizePerCulture")),e.R7$(2),e.Y8G("disabled",o.busy),e.R7$(2),e.JRh(e.bMT(38,26,"TextTemplateManagement::RestoreToDefault")),e.R7$(2),e.Y8G("disabled",o.busy),e.R7$(2),e.JRh(e.bMT(42,28,"TextTemplateManagement::SaveContent")))},dependencies:[c.Wk,u.a5,u.lt,s.qT,s.me,s.BC,s.cb,s.j4,s.JD,g.H1,i.aM3],encapsulation:2})}}return t})(),S=(()=>{class t extends E{constructor(){super(...arguments),this.configStateService=(0,e.WQX)(i.d14),this.languages=[],this.referenceTemplateContent={content:""}}ngOnInit(){this.languages=this.configStateService.getDeep("localization.languages"),this.selectedCultureName=this.languages[0].cultureName,this.referenceTemplateContent.cultureName=this.configStateService.getDeep("localization.currentCulture.cultureName"),super.ngOnInit(),this.getReferenceTemplateContent()}getReferenceTemplateContent(){this.templateContentService.get({templateName:this.route.snapshot.params.name,cultureName:this.referenceTemplateContent.cultureName}).subscribe(n=>{this.referenceTemplateContent=n})}onChangeSelectedCultureName(){this.getData().subscribe()}static{this.\u0275fac=(()=>{let n;return function(o){return(n||(n=e.xGo(t)))(o||t)}})()}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-template-contents"]],features:[e.Vt3],decls:63,vars:35,consts:[[3,"title"],[1,"card"],[1,"card-header"],[1,"form-label"],[1,"card-body"],[1,"row"],[1,"col-md-6"],[1,"mb-3"],["for","target-culture-name",1,"form-label"],["id","target-culture-name","name","target-culture-name",1,"culture-selector","form-select","form-control",3,"ngModelChange","ngModel"],[3,"ngValue"],[1,"col"],["for","reference-content",1,"form-label"],["id","reference-content","name","reference-content","rows","10","readonly","",1,"form-control",3,"value"],["id","template-inline-content-form",3,"formGroup"],["for","TemplateContent",1,"form-label"],["id","TemplateContent","name","TemplateContent","rows","10","formControlName","content",1,"form-control",3,"disabled"],[1,"col","col-md-4"],["routerLink","/text-template-management/text-templates","role","button",1,"btn","btn-primary"],["aria-hidden","true",1,"fa","fa-arrow-left","me-1"],[1,"col","col-md-8"],[1,"float-end"],["id","restore-to-default","type","button",1,"btn","btn-outline-primary",3,"click","disabled"],["id","save-content","type","button",1,"btn","btn-primary","ms-1",3,"click","disabled"]],template:function(a,o){1&a&&(e.j41(0,"abp-page",0),e.nI1(1,"abpLocalization"),e.j41(2,"div",1)(3,"div",2)(4,"label",3),e.EFF(5),e.nI1(6,"abpLocalization"),e.j41(7,"strong"),e.EFF(8),e.k0s()()(),e.j41(9,"div",4)(10,"div",5)(11,"div",6)(12,"div",7)(13,"label",8),e.EFF(14),e.nI1(15,"abpLocalization"),e.k0s(),e.j41(16,"select",9),e.mxI("ngModelChange",function(m){return e.DH7(o.referenceTemplateContent.cultureName,m)||(o.referenceTemplateContent.cultureName=m),m}),e.bIt("ngModelChange",function(){return o.getReferenceTemplateContent()}),e.Z7z(17,B,2,2,"option",10,e.Vm6),e.k0s()(),e.j41(19,"div",5)(20,"div",11)(21,"div",7)(22,"label",12),e.EFF(23),e.nI1(24,"abpLocalization"),e.k0s(),e.j41(25,"textarea",13),e.EFF(26,"                "),e.k0s()()()()(),e.j41(27,"div",6)(28,"div",7)(29,"label",8),e.EFF(30),e.nI1(31,"abpLocalization"),e.k0s(),e.j41(32,"select",9),e.mxI("ngModelChange",function(m){return e.DH7(o.selectedCultureName,m)||(o.selectedCultureName=m),m}),e.bIt("ngModelChange",function(){return o.onChangeSelectedCultureName()}),e.Z7z(33,J,2,2,"option",10,e.Vm6),e.k0s()(),e.j41(35,"form",14)(36,"div",5)(37,"div",11)(38,"div",7)(39,"label",15),e.EFF(40),e.nI1(41,"abpLocalization"),e.k0s(),e.j41(42,"span"),e.EFF(43," * "),e.k0s(),e.j41(44,"textarea",16),e.EFF(45,"                  "),e.k0s()()()()()()(),e.j41(46,"div",5)(47,"div",17)(48,"a",18),e.nrm(49,"i",19),e.j41(50,"span"),e.EFF(51),e.nI1(52,"abpLocalization"),e.k0s()()(),e.j41(53,"div",20)(54,"div",21)(55,"button",22),e.bIt("click",function(){return o.restoreToDefault()}),e.j41(56,"span"),e.EFF(57),e.nI1(58,"abpLocalization"),e.k0s()(),e.j41(59,"button",23),e.bIt("click",function(){return o.save()}),e.j41(60,"span"),e.EFF(61),e.nI1(62,"abpLocalization"),e.k0s()()()()()()()()),2&a&&(e.Y8G("title",e.bMT(1,17,"TextTemplateManagement::Contents")),e.R7$(5),e.SpI("",e.bMT(6,19,"TextTemplateManagement::Name"),": "),e.R7$(3),e.JRh(o.templateContent.name),e.R7$(6),e.JRh(e.bMT(15,21,"TextTemplateManagement::BaseCultureName")),e.R7$(2),e.R50("ngModel",o.referenceTemplateContent.cultureName),e.R7$(),e.Dyx(o.languages),e.R7$(6),e.JRh(e.bMT(24,23,"TextTemplateManagement::BaseContent")),e.R7$(2),e.Y8G("value",o.referenceTemplateContent.content),e.R7$(5),e.JRh(e.bMT(31,25,"TextTemplateManagement::TargetCultureName")),e.R7$(2),e.R50("ngModel",o.selectedCultureName),e.R7$(),e.Dyx(o.languages),e.R7$(2),e.Y8G("formGroup",o.form),e.R7$(5),e.JRh(e.bMT(41,27,"TextTemplateManagement::TemplateContent")),e.R7$(4),e.Y8G("disabled",o.busy),e.R7$(7),e.JRh(e.bMT(52,29,"TextTemplateManagement::ReturnToTemplates")),e.R7$(4),e.Y8G("disabled",o.busy),e.R7$(2),e.JRh(e.bMT(58,31,"TextTemplateManagement::RestoreToDefault")),e.R7$(2),e.Y8G("disabled",o.busy),e.R7$(2),e.JRh(e.bMT(62,33,"TextTemplateManagement::SaveContent")))},dependencies:[c.Wk,u.a5,u.lt,s.qT,s.xH,s.y7,s.me,s.wz,s.BC,s.cb,s.vS,s.j4,s.JD,g.H1,i.aM3],encapsulation:2})}}return t})(),v=(()=>{class t{constructor(n,a,o){this.list=n,this.router=a,this.service=o,this.data={items:[],totalCount:0}}ngOnInit(){this.hookToQuery()}hookToQuery(){this.list.hookToQuery(({filter:n,...a})=>this.service.getList({...a,filterText:n})).subscribe(n=>this.data=n)}editContents(n){this.router.navigate([`/text-template-management/text-templates/contents${n.isInlineLocalized?"/inline":""}/${n.name}`])}static{this.\u0275fac=function(a){return new(a||t)(e.rXU(i.aGM),e.rXU(c.Ix),e.rXU($))}}static{this.\u0275cmp=e.VBU({type:t,selectors:[["abp-text-templates"]],features:[e.Jv_([i.aGM,{provide:r.JF,useValue:"TextTemplateManagement.TextTemplates"}])],decls:6,vars:9,consts:[[3,"title","toolbar"],["id","wrapper"],["localizationSourceName","TextTemplateManagement",3,"list"],[1,"card"],[3,"actionsColumnWidth","data","recordsTotal","list"]],template:function(a,o){1&a&&(e.j41(0,"abp-page",0),e.nI1(1,"abpLocalization"),e.j41(2,"div",1),e.nrm(3,"abp-advanced-entity-filters",2),e.j41(4,"div",3),e.nrm(5,"abp-extensible-table",4),e.k0s()()()),2&a&&(e.Y8G("title",e.bMT(1,7,"TextTemplateManagement::Menu:TextTemplates"))("toolbar",o.data.items),e.R7$(3),e.Y8G("list",o.list),e.R7$(2),e.Y8G("actionsColumnWidth",170)("data",o.data.items)("recordsTotal",o.data.totalCount)("list",o.list))},dependencies:[r.XY,b.Is,g.H1,i.aM3],encapsulation:2})}}return t})();const O=r.Fh.createMany([{type:"string",name:"displayName",displayName:"TextTemplateManagement::Name",columnWidth:300},{type:"boolean",name:"isInlineLocalized",displayName:"TextTemplateManagement::IsInlineLocalized",columnWidth:150},{type:"string",name:"isLayout",displayName:"TextTemplateManagement::IsLayout",columnWidth:150,valueResolver:t=>(0,Y.of)(t.record.isLayout?'<div class="text-success"><i class="fa fa-check"></i></div>':"")},{type:"string",name:"layout",displayName:"TextTemplateManagement::Layout",columnWidth:300},{type:"string",name:"defaultCultureName",displayName:"TextTemplateManagement::DefaultCultureName",columnWidth:200}]),D=r.SY.createMany([{text:"TextTemplateManagement::EditContents",action:t=>{t.getInjected(v).editContents(t.record)},permission:"TextTemplateManagement.TextTemplates.EditContents"}]),j=r.KR.createMany([]),N={"TextTemplateManagement.TextTemplates":D},y={"TextTemplateManagement.TextTemplates":j},x={"TextTemplateManagement.TextTemplates":O},f=new e.nKC("TEXT_TEMPLATE_MANAGEMENT_ENTITY_ACTION_CONTRIBUTORS"),C=new e.nKC("TEXT_TEMPLATE_MANAGEMENT_TOOLBAR_ACTION_CONTRIBUTORS"),M=new e.nKC("TEXT_TEMPLATE_MANAGEMENT_ENTITY_PROP_CONTRIBUTORS");let V=(()=>{class t{constructor(n){this.injector=n}canActivate(){const n=this.injector.get(r.yJ),a=this.injector.get(f,null)||{},o=this.injector.get(C,null)||{},T=this.injector.get(M,null)||{},m=this.injector.get(i.d14);return(0,r.Nl)(m,"TextTemplateManagement").pipe((0,d.T)(R=>({"TextTemplateManagement.TextTemplates":R.TextDefinition})),(0,r.p2)(m,"TextTemplateManagement"),(0,h.M)(R=>{(0,r.xB)(n.entityActions,N,a),(0,r.xB)(n.toolbarActions,y,o),(0,r.ah)(n.entityProps,x,R.prop,T)}),(0,U.u)(!0))}static{this.\u0275fac=function(a){return new(a||t)(e.KVO(e.zZn))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac})}}return t})(),W=(()=>{class t{constructor(n){this.textTemplateManagementFeatures=n}canActivate(){return this.textTemplateManagementFeatures.pipe((0,d.T)(n=>n.enable))}static{this.\u0275fac=function(a){return new(a||t)(e.KVO(F.jn))}}static{this.\u0275prov=e.jDH({token:t,factory:t.\u0275fac})}}return t})();const G=()=>(0,e.WQX)(F.jn).pipe((0,d.T)(p=>p.enable)),P=()=>{const t=(0,e.WQX)(e.zZn),p=t.get(r.yJ),n=t.get(f,null)||{},a=t.get(C,null)||{},o=t.get(M,null)||{},T=t.get(i.d14);return(0,r.Nl)(T,"TextTemplateManagement").pipe((0,d.T)(m=>({"TextTemplateManagement.TextTemplates":m.TextDefinition})),(0,r.p2)(T,"TextTemplateManagement"),(0,h.M)(m=>{(0,r.xB)(p.entityActions,N,n),(0,r.xB)(p.toolbarActions,y,a),(0,r.ah)(p.entityProps,x,m.prop,o)}))},H=[{path:"",redirectTo:"text-templates",pathMatch:"full"},{path:"text-templates",component:i.Cs_,canActivate:[i.W_R,i.RH_,G],resolve:[P],children:[{path:"",component:i.yFO,data:{requiredPolicy:"TextTemplateManagement.TextTemplates",replaceableComponent:{key:"TextTemplateManagement.TextTemplates",defaultComponent:v}},title:"TextTemplateManagement::Menu:TextTemplates"},{path:"contents",component:i.Cs_,canActivate:[i.RH_],data:{requiredPolicy:"TextTemplateManagement.TextTemplates.EditContents"},children:[{path:"inline/:name",component:i.yFO,data:{replaceableComponent:{key:"TextTemplateManagement.InlineTemplateContent",defaultComponent:L}}},{path:":name",component:i.yFO,data:{replaceableComponent:{key:"TextTemplateManagement.TemplateContents",defaultComponent:S}}}],title:"TextTemplateManagement::Contents"}]}];let w=(()=>{class t{static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[c.iI.forChild(H),c.iI]})}}return t})(),Q=(()=>{class t{static forChild(n={}){return{ngModule:t,providers:[{provide:f,useValue:n.entityActionContributors},{provide:C,useValue:n.toolbarActionContributors},{provide:M,useValue:n.entityPropContributors}]}}static forLazy(n={}){return new i.l37(t.forChild(n))}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275mod=e.$C({type:t})}static{this.\u0275inj=e.G2t({imports:[w,u.fs,i.Ui,b.pY,I.Ts,X.zH,g.wq,b.Fl]})}}return t})()}}]);